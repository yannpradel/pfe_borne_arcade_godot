shader_type spatial;

// üî¥ Couleur principale du laser (rouge intense r√©glable dans l'√©diteur)
uniform vec4 laser_color = vec4(1.0, 0.0, 0.0, 1.0); 

// ‚ú® Intensit√© du Glow (r√©glable entre 0 et 10 dans l'√©diteur)
uniform float glow_intensity : hint_range(0.0, 10.0) = 5.0;

// üöÄ Vitesse d'animation
uniform float speed = 3.0;

// üé∂ Fr√©quence des oscillations
uniform float frequency = 20.0;

void fragment() {
    vec2 uv_offset = UV;
    
    // Ajout d'un d√©grad√© radial pour uniformiser l'effet lumineux
    float radial_gradient = smoothstep(0.1, 0.9, length(uv_offset - vec2(0.5, 0.5)));
    
    // Effet de pulsation anim√©
    float pulse = sin(TIME * speed) * 0.3 + 0.7;

    // Ajout d'un d√©grad√© horizontal (plus intense au centre)
    float horizontal_fade = smoothstep(0.2, 0.8, uv_offset.x);

    // Couleur principale du laser (rouge intense)
    vec3 base_color = mix(vec3(1.0, 0.0, 0.0), vec3(1.0, 0.3, 0.3), horizontal_fade);
    base_color *= pulse; // Animation de la luminosit√©

    // Intensit√© du glow
    vec3 emission = base_color * glow_intensity * radial_gradient;

    // Application des couleurs
    ALBEDO = base_color;
    EMISSION = emission;
    ALPHA = laser_color.a;
}
